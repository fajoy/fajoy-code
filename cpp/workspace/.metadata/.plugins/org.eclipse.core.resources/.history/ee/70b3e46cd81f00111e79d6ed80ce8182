
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

using namespace std;

 class SerCon{
 public :
    char host[255];
    int port;
    char filename[255];
    SerCon(void);
    void parse(char *,char *);
    void show(void);
 };

    SerCon::SerCon(void){
         memset(host,0,sizeof(host));
         memset(filename,0,sizeof(filename));
         port=0;
    }
    void SerCon::parse (char *query,char *s){

       char sport[5];
       sscanf(query,s,host,sport,filename);
       port=atoi(sport);
    }
    void SerCon::show(void){
       printf("h=%s,p=%d,f=%s<br />",host,port,filename);
    }



int main(int argc, char* argv[], char *envp[]) {


        printf("Content-type: text/html\n\n");
        char *query = getenv("QUERY_STRING");
        if(query==NULL)
           query="h1=112&p1=22&f1=233&h2=&p2=&f2=&h3=&p3=&f3=&h4=&p4=&f4=&h5=&p5=&f5=";

        printf("query=%s<br />", query);

        SerCon s1;
         try{
          s1.parse(query,"h1=%[^&]&p1=%d&f1=%[^&]");
         }catch(...){
            cout <<"parse error!";
         }
        s1.show();
	cout << "Hello World!!!" << endl;
	return 0;
}
